---
// Astroのフロントマターではなく、スクリプト内でLIFF_IDを定義します。
---
<html>
<head>
    <title>LINE Login</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        async function main() {
            // スクリプト内でLIFF_IDを定義
            const LIFF_ID = '2004006139-5eWAxRAO'; // 実際のLIFF IDに置き換えてください

            // `window.liff`を使用してLIFF SDKのメソッドにアクセス
            await window.liff.init({ liffId: LIFF_ID });
            if (!window.liff.isLoggedIn()) {
                window.liff.login();
            } else {
                const profile = await window.liff.getProfile();
                window.location.href = `/afterLogin?name=${encodeURIComponent(profile.displayName)}`;
            }
        }
        main();
    </script>
</head>
<body>
    <p>LINEログインを実行中...</p>
</body>
</html>